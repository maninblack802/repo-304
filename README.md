# Домашнее задание к занятию «Резервное копирование баз данных»
---
### Задание 1. Резервное копирование

`Финансовая компания решила увеличить надежность работы баз данных и их резервного копирования. Необходимо описать, какие варианты резервного копирования подходят в случаях:`

`1.1. Необходимо восстанавливать данные в полном объеме за предыдущий день`

Инкрементные бэкапы (Incremental backup)

`1.2. Необходимо восстанавливать данные за час до предполагаемой поломки`

Дифференциальный бэкап (differential backup)

`1.3.* Возможен ли кейс, когда при поломке базы происходило моментальное переключение на работающую или починенную базу данных`

При наличии основной базы и нескольких реплик при поломке основной базы одна из реплик может становиться мастером

---

### Задание 2. PostgreSQL

`2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore)`

$ pg_dump mydb > db.sql (выгрузка базы данных в файл скрипта)

$ pg_restore -d newdb db.dump (восстановление данных в новую базу)

`2.2.* Возможно ли автоматизировать этот процесс? Если да, то как?`

Возможно с помощью внешних планировщиков типа Cron 

---

### Задание 3. MySQL

`3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL`

mysqlbinlog --start-datetime="2023-03-01 00:00:00" \ -- stop-datetime="2023-03-02 00:00:00" \ -- to-last-log \ -- result-file="/path_to_backup/incremental_backup.sql" \ binlog.000001 binlog.000002 …

--start-datetime и --stop-datetime определяют временной промежуток, за который нужно извлечь изменения

--to-last-log указывает mysqlbinlog продолжить чтение бинарных логов до последнего доступного

--result-file задаёт путь и имя файла для сохранения SQL-команд, извлечённых из бинарных логов

binlog.000001 binlog.000002 … - список бинарных логов для обработки

`3.2.* В каких случаях использование реплики будет давать преимущество по сравнению с обычным резервным копированием?`

Предположу, что при реплицировании master-master
